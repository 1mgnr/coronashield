
<!DOCTYPE html>
<html lang="en">
<head>
        <title>Corona</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link href="https://fonts.googleapis.com/css?family=Rubik:400,700" rel="stylesheet">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/aos.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/all.css">
        <link rel="stylesheet" href="css/radio_button.css">
        
    

<style>
.fa {
  font-size: 50px;
  cursor: pointer;
  user-select: none;
}

.fa:hover {
  color: darkblue;
}
</style>
</head>
<body onload="fetchUser()">
  <div class="site-mobile-menu">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close mt-3">
        <span class="fas fa-times js-menu-toggle"></span>
      </div>
    </div>
    <div class="site-mobile-menu-body"></div>
  </div>

    <!-- Navigation Menu -->
  <header class="site-navbar" role="banner">
    <div class="container">
      <div class="row align-items-center">

      <div class="col-11 col-xl-2">
        <h1 class="mb-0 site-logo"><a href="#" class="text-white h2 mb-0">munshiG</a></h1>
      </div>

      <div class="col-12 col-md-10 d-none d-xl-block">
        <nav class="site-navigation position-relative text-right" role="navigation">
          <ul class="site-menu js-clone-nav mr-auto d-none d-lg-block">
            <li><a href="setting.html"><span>Setting</span></a></li>
          </ul>
        </nav>
      </div>
      <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-white"><span class="fas fa-bars h3"></span></a></div>
      </div>
    </div>
  </header>
  <!-- End Navigation Menu -->

  <div class="site-blocks-cover inner-page-cover overlay" style="background-image: url(images/banner.png);" data-aos="fade" data-stellar-background-ratio="0.5">
    <div class="container">
      <div class="row align-items-center justify-content-center text-center">
        <div class="col-md-10">
          <div class="row justify-content-center mb-4">
            <div class="col-md-10 text-center">
              <h1 data-aos="fade-up" style="margin-top: 100px;">Welcome General Store</h1>
              <p data-aos="fade-up" class=" w-75 mx-auto">Business is the activity of making one's living or making money by producing or buying and selling products</p></br>
              <!-- Start of Location Button Section :D -->
               <label style="color: black;" data-aos="fade-up">
                <input type="checkbox"  name="cc" class="mycheckbox"  id="myCheck"  onclick="checkFunction()"/>
                <span></span>
              </br>
              <label id="label_tv">Location Off</label>
              </label>
              <!-- End of Location Button Section :D -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>  

    <!-- Traffic Section :D -->
    <div class="site-section bg-light">
      <div class="container">
        <div class="row" >
           <div class="col-md-12 mb-5" data-aos="fade" style="margin: 0 auto;">
            <div class="p-5 bg-white" style="margin-top: -120px;">
              <div class="row">

              <!-- Start of traffic radio :D -->
                <div class="col-md-6 center-div z-bigger">
                   <p class=" mx-auto" style="color: black; margin-left: 20px;">Traffic</p>
                  <input class="checkbox-tools" type="radio" name="tools" id="tool-1" checked/>
                  <label class="for-checkbox-tools" for="tool-1" onclick="updateTraffic(localStorage.getItem('storeId'), 0)">
                    <i class='uil fas fa-user'></i>
                    Low
                  </label>
                  <input class="checkbox-tools" type="radio" name="tools" id="tool-2"/>
                  <label class="for-checkbox-tools" for="tool-2" onclick="updateTraffic(localStorage.getItem('storeId'), 1)">
                    <i class='uil fas fa-user-friends'></i>
                    Medium
                  </label>
                  <input class="checkbox-tools" type="radio" name="tools" id="tool-3"/>
                  <label class="for-checkbox-tools" for="tool-3" onclick="updateTraffic(localStorage.getItem('storeId'), 2)">
                    <i class='uil fas fa-users'></i>
                    High
                  </label>
                </div>
              
              <!-- End of traffic radio :D -->


               <!-- Start of Shop status radio :D -->
                <div class="col-md-6 center-div z-bigger">
                   <p class=" mx-auto" style="color: black; margin-left: 20px;">Shop Status</p>
                    <input class="checkbox-tools3" type="radio" name="shop_radio" id="tool-5" checked/>
                  <label class="for-checkbox-tools3" for="tool-5" onclick="updateStatus(localStorage.getItem('storeId'), 0)">
                    <i class='uil fas fa-door-closed'></i>
                    Closed
                  </label>
                  <input class="checkbox-tools2" type="radio" name="shop_radio" id="tool-4"/>
                  <label class="for-checkbox-tools2" for="tool-4" onclick="updateStatus(localStorage.getItem('storeId'), 1)">
                    <i class='uil uil-line-alt fas fa-door-open'></i>
                    Open
                  </label>
                </div>
              <!-- End of Shop status radio :D -->
                
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <!-- End List Section :D -->
  <!-- Stat Of Footer Section :D -->
  <footer class="site-footer">
    <div class="container">
      <div class="col-md-6 mb-5 mb-lg-0 col-lg-3" style="margin: 0 auto; text-align: center;">
        <a href="#" class="pl-0 pr-3"><i class="fab fa-facebook-f"></i></a>
        <a href="#" class="pl-3 pr-3"><i class="fab fa-instagram"></i></a>
      </div>
    </div>
  </footer>
  <!-- End Of Footer Section :D -->

  <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-firestore.memory.js"></script>

<script type="text/javascript"src="firebase-config.js"></script>

  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/all.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/main.js"></script>
  <script src="js/seller.js"></script>
  <script src="js/fontawesome.min.js"></script>

<script>
function checkFunction() {
  var checkBox = document.getElementById("myCheck");
  var text = document.getElementById("label_tv");
  if (checkBox.checked == true){
    text.innerHTML = "Location On";
  } else {
      text.innerHTML = "Location Off";
  }
}

function fetchUser() {
  let doc = firebase.firestore().collection('users').doc(localStorage.getItem("storeId"));

  let observer = doc.onSnapshot(docSnapshot => {
    console.log(`Received doc snapshot: ${docSnapshot}`);
    
    var status = docSnapshot.data().status;
    console.log('Received doc snapshot status: ' + status);

    var traffic = docSnapshot.data().traffic;
    console.log('Received doc snapshot traffic: ' + traffic);

    if(status == 0){
      document.getElementById("tool-5").checked = true;
      document.getElementById("tool-4").checked = false;
      traffic = 0;
    }
    else{
      document.getElementById("tool-5").checked = false;
      document.getElementById("tool-4").checked = true;
    }

    if(traffic == 0){
      document.getElementById("tool-1").checked = true;
      document.getElementById("tool-2").checked = false;
      document.getElementById("tool-3").checked = false;
    }
    else if(traffic == 1){
      document.getElementById("tool-1").checked = false;
      document.getElementById("tool-2").checked = true;
      document.getElementById("tool-3").checked = false;
    }
    else{
      document.getElementById("tool-1").checked = false;
      document.getElementById("tool-2").checked = false;
      document.getElementById("tool-3").checked = true;
    }

  }, err => {
    console.log(`Encountered error: ${err}`);
  });
}

function updateStatus(id, status) {
  firebase.firestore().collection('users').doc(id).update({
  status: status
});
  console.log("status updated");
}

function updateTraffic(id, traffic) {
  firebase.firestore().collection('users').doc(id).update({
  traffic: traffic
});
  console.log("traffic updated");
}
</script>

</body>
</html>